<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ACT Lab Online Consent</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?version=3.52.1&features=URL"></script>
    <style>
      body {
        background-color: #222222;
        font-family: "Arial Black", Gadget, sans-serif;
        color: #eeeeee;
      }
      a:link {
        color: hotpink;
      }
      h1 {
        font-size: xx-large;
      }
      .button {
        background-color: #4caf50;
        border: none;
        border-radius: 8px;
        color: white;
        padding: 16px 32px;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        margin: 4px 2px;
        opacity: 0.9;
        transition: 0.3s;
        display: inline-block;
        text-decoration: none;
        cursor: pointer;
      }
      .button:hover {
        opacity: 1;
      }
    </style>
  </head>

  <body>
    <div align="center">
      <h1>ACT Lab Online Consent</h1>
      <h3>
        Please read the consent form below, and either<br />click the
        <span style="color: #4caf50;">ACCEPT</span> button to continue,<br />
        or close the tab to decline.
      </h3>
      <object
        data="./actlab_online_consent.pdf"
        style="width: 70%; height: 72vh;"
        type="application/pdf"
      >
        <h2>Your browser doesn't support embedded PDFs.</h2>
        <h2>
          Please download the consent form&nbsp;
          <a href="./actlab_online_consent.pdf">here</a>.
        </h2>
        <embed
          src="./actlab_online_consent.pdf"
          style="width: 70%; height: 75vh;"
          type="application/pdf"
        />
      </object>
      <br />
      <button id="accept" class="button accept">ACCEPT (Will Redirect)</button>
    </div>
    <script type="text/javascript">
      document.getElementById("accept").onclick = function () {
        var current_url = window.location.href;
        var url = new URL(current_url);
        var next_url = url.searchParams.get("dest");
        console.log(next_url);
        if (next_url === null) {
          console.error("URL not specified!");
        } else {
          // try e.g. https://actlabyale.github.io/web-consent?dest=https://github.com/aforren1?tab=repositories
          window.location.href = next_url;
        }
      };
    </script>
  </body>
</html>
